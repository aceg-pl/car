<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Audi Competitor Model Matrix (EU)</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{
    --bg:#0f1115; --fg:#e8eaed; --muted:#9aa0a6; --line:#2a2f3a;
    --site-header-h: 66px;
  }
  body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial;}
  header{position:sticky;top:0;background:#0f1115;z-index:30;border-bottom:1px solid var(--line)}
  .wrap{max-width:1200px;margin:0 auto;padding:16px}
  h1{font-size:18px;margin:0 0 8px 0;font-weight:600}
  .controls{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
  label{color:var(--muted)}
  select,button{background:#151924;color:var(--fg);border:1px solid var(--line);padding:8px 10px;border-radius:8px;cursor:pointer}
  button:hover{border-color:#3a4252}

  .grid{
    overflow:auto;
    max-height:70vh;
    border:1px solid var(--line);
    border-radius:10px;
    background:#0f1115;
    position:relative;
  }

  table{width:100%;border-collapse:separate;border-spacing:0;margin:0}
  th,td{border-bottom:1px solid var(--line);padding:8px 10px;vertical-align:middle;background:#0f1115}
  tbody tr:hover td{background:#131824}

  thead th{
    position:sticky;
    top: var(--site-header-h);
    z-index: 20;
    background:#0f1115;
    box-shadow: 0 1px 0 0 #2a2f3a, 0 4px 8px #00000033;
  }

  #matrixTable th:first-child,
  #matrixTable td:first-child{
    position:sticky;
    left:0;
    z-index: 10;
    background:#0f1115;
    box-shadow: 1px 0 0 #2a2f3a;
    white-space:nowrap;
  }
  #matrixTable thead th:first-child{ z-index: 25; }

  .seg{white-space:nowrap;color:#cbd1d9;font-weight:600}
  .brandcell{display:flex;align-items:center;gap:8px;white-space:nowrap}
  .brandname{color:#cbd1d9}
  .tag{font-size:11px;padding:2px 6px;border:1px solid var(--line);border-radius:6px;background:#121725;color:#9aa0a6;margin-left:6px}
  .model{color:var(--fg)}
  .blank{color:var(--muted)}
  .note{font-size:12px;color:#9aa0a6;margin-top:8px}
  .icon{width:18px;height:18px;display:inline-block;vertical-align:middle;filter: invert(90%) sepia(5%) saturate(200%) hue-rotate(180deg) brightness(95%) contrast(90%);}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <div style="display:flex;gap:12px;align-items:center">
      <h1 style="flex:1 1 auto">Audi Competitor Model Matrix (EU)</h1>
      <div class="controls">
        <label for="viewSelect">View:</label>
        <select id="viewSelect">
          <option value="all">All models</option>
          <option value="seg0">Compact Hatch/Sedan</option>
          <option value="seg1">Mid-Size Sedan</option>
          <option value="seg2">Executive Sedan</option>
          <option value="seg3">Compact SUV</option>
          <option value="seg4">Mid-Size SUV</option>
          <option value="seg5">Large / 3-Row</option>
        </select>
      </div>
      <div class="controls">
        <button id="downloadCsvBtn">Export CSV</button>
      </div>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="grid" id="grid">
    <table id="matrixTable">
      <thead></thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="note">Brands expanded to include Ford, Honda, Toyota, Renault, Opel/Vauxhall, Dacia, SEAT, Nissan, Suzuki, Mitsubishi, Subaru, DS, Jeep, Fiat, MG; placements reflect EU availability and segment alignment. [Sources: brand EU pages, EU sales/lineup context]</div>
</div>

<script>
(function(){
  function setHeaderOffset(){
    const hdr = document.querySelector('header');
    const h = hdr ? Math.round(hdr.getBoundingClientRect().height) : 66;
    document.documentElement.style.setProperty('--site-header-h', h + 'px');
  }

  const ICON_CDN = 'https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/'; // Simple Icons CDN [web:136][web:137]

  const iconSlug = {
    "Audi":"audi","BMW":"bmw","Mercedes-Benz":"mercedes","Tesla":"tesla","Volvo":"volvo",
    "Lexus":"lexus","Genesis":"genesis","Porsche":"porsche","Jaguar":"jaguar","Land Rover":"landrover",
    "Alfa Romeo":"alfaromeo","Polestar":"polestar","Nio":"nio","BYD":"byd","Lucid":"lucid",
    "Volkswagen":"volkswagen","Škoda":"skoda","Cupra":"cupra","Peugeot":"peugeot","Citroën":"citroen",
    "Hyundai":"hyundai","Kia":"kia","Mazda":"mazda",
    "Ford":"ford","Honda":"honda","Toyota":"toyota","Renault":"renault","Opel":"opel","Vauxhall":"vauxhall",
    "Dacia":"dacia","SEAT":"seat","Nissan":"nissan","Suzuki":"suzuki","Mitsubishi":"mitsubishi","Subaru":"subaru",
    "DS":"dsautomobiles","Jeep":"jeep","Fiat":"fiat","MG":"mg"
  };

  const segments = [
    "Compact Hatch/Sedan",
    "Mid-Size Sedan",
    "Executive Sedan",
    "Compact SUV",
    "Mid-Size SUV",
    "Large / 3-Row"
  ];

  // Core dataset: existing premium + new mainstream brands for EU context.
  const data = {
    // Premium German + related already present
    "Audi": ["A3 Hatch / Sedan","A4 Sedan","A6 Sedan","Q3 SUV","Q5 SUV","Q7 SUV"],
    "BMW": ["1-Series Hatch","3-Series Sedan","5-Series Sedan","X1 SAV","X3 SAV","X5 SAV"],
    "BMW (Alt)": ["2-Series Gran Coupe","i4 Gran Coupe (EV)","i5 Sedan (EV)","iX1 (EV)","iX3 (EV)","X7 SAV"],
    "BMW (Addl)": ["(Blank)","(Blank)","8-Series Gran Coupe","X2 SAV","X4 SAV","(Blank)"],
    "Mercedes-Benz": ["A-Class Hatch","C-Class Sedan","E-Class Sedan","GLA SUV","GLC SUV","GLE SUV"],
    "Mercedes-Benz (Alt)": ["CLA-Class Sedan","CLE-Class","EQE Sedan (EV)","EQA (EV)","EQC (EV)","EQS SUV (EV)"],
    "Mercedes-Benz (Addl)": ["(Blank)","(Blank)","S-Class Sedan","(Blank)","GLC Coupe","GLS SUV"],
    "Tesla": ["Model 3 (Entry)","Model 3 (Core)","Model S","Model Y (Entry)","Model Y (Core)","Model X"],
    "Volvo": ["C40 (EV)","S60 Sedan","S90 Sedan","XC40 SUV","XC60 SUV","XC90 SUV"],
    "Volvo (Alt)": ["EX30 (EV)","(Blank)","(Blank)","EX40 (EV)","(Blank)","EX90 (EV)"],
    "Lexus": ["CT 200h","IS Sedan","ES Sedan","UX Crossover","NX Crossover","RX SUV"],
    "Lexus (Alt)": ["(Blank)","(Blank)","LS Sedan","(Blank)","RZ (EV)","TX SUV"],
    "Genesis": ["(Blank)","G70 Sedan","G80 Sedan","GV60 (EV)","GV70 SUV","GV80 SUV"],
    "Porsche": ["(Blank)","(Blank)","Panamera","Macan","Cayenne","Cayenne Coupe"],
    "Jaguar": ["(Blank)","XE Sedan","XF Sedan","E-Pace SUV","F-Pace SUV","I-Pace (EV)"],
    "Land Rover": ["(Blank)","(Blank)","(Blank)","Discovery Sport","Range Rover Velar","Discovery"],
    "Land Rover (Alt)": ["(Blank)","(Blank)","(Blank)","Range Rover Evoque","Defender 90/110/130","Range Rover Sport"],
    "Alfa Romeo": ["Giulietta","Giulia Sedan","(Blank)","Tonale","Stelvio SUV","(Blank)"],
    "Polestar": ["2 Sedan","2 Sedan","3 SUV (Large EV)","4 SUV","(Blank)","(Blank)"],
    "Nio": ["ET5","ET5 Touring","ET7 Sedan","EL6 SUV","EL7 SUV","ES8 SUV"],
    "BYD": ["Dolphin","Seal Sedan","(Blank)","Atto 3","Seal U SUV","Tang SUV"],
    "Lucid": ["(Blank)","(Blank)","Air Sedan","(Blank)","(Blank)","(Blank)"],
    "Volkswagen": ["Golf Hatch","Passat Sedan/Estate","Arteon","T-Roc","Tiguan","Touareg"],
    "Škoda": ["Octavia","Superb","Superb","Kamiq","Karoq","Kodiaq"],
    "Škoda (Alt)": ["Enyaq (EV)","(Blank)","(Blank)","(Blank)","Enyaq Coupe (EV)","(Blank)"],
    "Cupra": ["Leon","Leon","(Blank)","Formentor","Tavascan (EV)","(Blank)"],
    "Cupra (Alt)": ["Born (EV)","(Blank)","(Blank)","(Blank)","(Blank)","(Blank)"],
    "Peugeot": ["308 Hatch","508 Sedan/SW","(Blank)","2008","3008","5008"],
    "Citroën": ["C4","C5 X","(Blank)","C3 Aircross","C5 Aircross","(Blank)"],
    "Hyundai": ["i30","Ioniq 6 (EV)","(Blank)","Kona","Tucson","Santa Fe"],
    "Kia": ["Ceed","EV6 (EV)","(Blank)","Niro","Sportage","Sorento"],
    "Mazda": ["3","6","(Blank)","CX-30","CX-5","CX-60/CX-80"],

    // Newly added mainstream EU brands and placements
    // Ford EU portfolio and sizing context [web:157][web:160]
    "Ford": ["(Blank)","(Blank)","(Blank)","Puma / Explorer (EV)","Kuga / Mustang Mach‑E","(Blank)"],

    // Honda EU availability (models may vary by market) [web:161][web:175][web:173]
    "Honda": ["Civic","(Blank)","(Blank)","HR‑V / ZR‑V","CR‑V","(Blank)"],

    // Toyota EU lineup highlights [web:168][web:162][web:172]
    "Toyota": ["Corolla","Camry","(Blank)","C‑HR","RAV4 / bZ4X","Highlander"],

    // Renault group key models in EU sales context [web:181][web:29]
    "Renault": ["Clio / Mégane E‑Tech","(Blank)","(Blank)","Captur / Austral","Austral / Espace","(Blank)"],

    // Opel/Vauxhall (Stellantis EU) [web:29][web:183]
    "Opel": ["Corsa","Astra","(Blank)","Mokka","Grandland","(Blank)"],
    "Vauxhall": ["Corsa","Astra","(Blank)","Mokka","Grandland","(Blank)"],

    // Dacia (value EU leader) [web:181]
    "Dacia": ["Sandero","(Blank)","(Blank)","Duster","Jogger (2‑row/3‑row alt)","Jogger (3‑row)"],

    // SEAT (sibling to Cupra; availability varies) [web:29]
    "SEAT": ["Ibiza / Leon","Leon","(Blank)","Arona","Ateca","(Blank)"],

    // Nissan EU [web:29]
    "Nissan": ["(Blank)","(Blank)","(Blank)","Juke","Qashqai","X‑Trail"],

    // Suzuki EU [web:185]
    "Suzuki": ["Swift","(Blank)","(Blank)","Vitara","S‑Cross","(Blank)"],

    // Mitsubishi EU (alliance-based entries) [web:29]
    "Mitsubishi": ["(Blank)","(Blank)","(Blank)","ASX","Eclipse Cross","(Blank)"],

    // Subaru EU (limited lineup) [web:29]
    "Subaru": ["(Blank)","(Blank)","(Blank)","Crosstrek","Forester","(Blank)"],

    // DS Automobiles (premium Stellantis) [web:29]
    "DS": ["DS 3","DS 4","(Blank)","DS 3","DS 7","(Blank)"],

    // Jeep EU [web:29]
    "Jeep": ["(Blank)","(Blank)","(Blank)","Avenger","Compass","(Blank)"],

    // Fiat EU [web:29]
    "Fiat": ["500e / 600e","(Blank)","(Blank)","600e","500X (legacy)","(Blank)"],

    // MG Motor EU [web:191]
    "MG": ["MG4","(Blank)","(Blank)","ZS","Marvel R","(Blank)"]
  };

  const viewSelect = document.getElementById('viewSelect');
  const thead = document.querySelector('#matrixTable thead');
  const tbody = document.querySelector('#matrixTable tbody');

  function getAllBaseBrandNames(){
    const set = new Set();
    Object.keys(data).forEach(b => set.add(b.replace(/\s*\(.*\)$/, '')));
    return Array.from(set).sort((a,b)=> a.localeCompare(b,'en',{sensitivity:'base'}));
  }
  function rowsForBrand(base){
    const keys = Object.keys(data).filter(k => k === base || k.startsWith(base + ' '));
    const order = k => k.includes('(Alt)') ? 1 : k.includes('(Addl)') ? 2 : 0;
    return keys.sort((a,b)=> order(a)-order(b));
  }
  function iconURL(base){
    const slug = iconSlug[base];
    return slug ? ICON_CDN + slug + '.svg' : null;
  }
  function currentView(){
    const val = viewSelect.value;
    if (val === 'all') return { mode:'all', segIndex:null };
    const idx = Number(val.replace('seg',''));
    return { mode:'single', segIndex: isNaN(idx) ? 0 : idx };
  }

  function renderHeader(){
    thead.innerHTML = '';
    const tr = document.createElement('tr');
    const thBrand = document.createElement('th');
    thBrand.textContent = 'Brand';
    tr.appendChild(thBrand);

    const view = currentView();
    if (view.mode === 'all') {
      segments.forEach(seg => {
        const th = document.createElement('th');
        th.innerHTML = `<div class="seg">${seg}</div>`;
        tr.appendChild(th);
      });
    } else {
      const th = document.createElement('th');
      th.innerHTML = `<div class="seg">${segments[view.segIndex]}</div>`;
      tr.appendChild(th);
    }
    thead.appendChild(tr);
  }

  function renderBody(){
    tbody.innerHTML = '';
    const view = currentView();
    const bases = getAllBaseBrandNames();
    bases.forEach(base => {
      rowsForBrand(base).forEach(key => {
        const tr = document.createElement('tr');

        const tdBrand = document.createElement('td');
        const url = iconURL(base);
        const img = url ? `<img class="icon" alt="${base}" src="${url}" onerror="this.style.display='none'">` : '';
        tdBrand.innerHTML = `<div class="brandcell">${img}<span class="brandname">${base}</span>${key!==base?`<span class="tag">${key.replace(base,'').trim()}</span>`:''}</div>`;
        tr.appendChild(tdBrand);

        const models = data[key] || [];
        if (view.mode === 'all') {
          for(let i=0;i<6;i++){
            const td = document.createElement('td');
            const val = models[i] || '(Blank)';
            td.innerHTML = val === '(Blank)' ? `<span class="blank">(Blank)</span>` : `<span class="model">${val}</span>`;
            tr.appendChild(td);
          }
        } else {
          const i = view.segIndex;
          const td = document.createElement('td');
          const val = models[i] || '(Blank)';
          td.innerHTML = val === '(Blank)' ? `<span class="blank">(Blank)</span>` : `<span class="model">${val}</span>`;
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      });
    });
  }

  function exportCSV(){
    const rows = [];
    const view = currentView();

    if (view.mode === 'all') {
      rows.push(['Brand', ...segments]);
    } else {
      rows.push(['Brand', segments[view.segIndex]]);
    }

    const bases = getAllBaseBrandNames();
    bases.forEach(base => {
      rowsForBrand(base).forEach(key => {
        const models = data[key] || [];
        if (view.mode === 'all') {
          rows.push([base + (key!==base?` ${key.replace(base,'')}`:''), ...models.map(x=> x||'(Blank)')]);
        } else {
          const val = models[view.segIndex] || '(Blank)';
          rows.push([base + (key!==base?` ${key.replace(base,'')}`:''), val]);
        }
      });
    });

    const csv = rows.map(r => r.map(x => /[",\n]/.test(x)? `"${x.replace(/"/g,'""')}"` : x).join(',')).join('\n');
    const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = view.mode==='all' ? 'EU_Competitor_Model_Matrix_all.csv'
                                   : `EU_Competitor_Model_Matrix_${segments[view.segIndex].replace(/\s+/g,'_')}.csv`;
    document.body.appendChild(a);
    a.click(); a.remove();
  }

  function start(){
    setHeaderOffset();
    renderHeader();
    renderBody();
    window.addEventListener('resize', setHeaderOffset, {passive:true});
    document.getElementById('viewSelect').addEventListener('change', () => { renderHeader(); renderBody(); });
    document.getElementById('downloadCsvBtn').addEventListener('click', exportCSV);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', start);
  } else {
    start();
  }
})();
</script>
</body>
</html>
