<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Audi Competitor Model Matrix (EU)</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  :root{
    --bg:#0f1115; --fg:#e8eaed; --muted:#9aa0a6; --line:#2a2f3a; --chip:#1a73e81a;
  }
  body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial;}
  header{position:sticky;top:0;background:#0f1115;backdrop-filter:blur(6px);z-index:10;border-bottom:1px solid var(--line)}
  .wrap{max-width:1200px;margin:0 auto;padding:16px}
  h1{font-size:18px;margin:0 0 8px 0;font-weight:600}
  .controls-right{margin-left:auto;display:flex;gap:8px}
  button{background:#151924;color:var(--fg);border:1px solid var(--line);padding:8px 10px;border-radius:8px}
  .grid{overflow:auto;max-height:70vh;border:1px solid var(--line);border-radius:10px}
  table{width:100%;border-collapse:separate;border-spacing:0;margin-top:14px}
  th,td{border-bottom:1px solid var(--line);padding:8px 10px;vertical-align:middle}
  th{position:sticky;top:66px;background:#0f1115;border-bottom:1px solid var(--line);z-index:5}
  tbody tr:hover td{background:#131824}
  .seg{white-space:nowrap;color:#cbd1d9;font-weight:600}
  .brandcell{display:flex;align-items:center;gap:8px;white-space:nowrap}
  .brandname{color:#cbd1d9}
  .tag{font-size:11px;padding:2px 6px;border:1px solid var(--line);border-radius:6px;background:#121725;color:#9aa0a6;margin-left:6px}
  .model{color:var(--fg)}
  .blank{color:var(--muted)}
  .note{font-size:12px;color:#9aa0a6;margin-top:8px}
  .icon{width:18px;height:18px;display:inline-block;vertical-align:middle;filter: invert(90%) sepia(5%) saturate(200%) hue-rotate(180deg) brightness(95%) contrast(90%);}
</style>
</head>
<body>
<header>
  <div class="wrap" style="display:flex;gap:12px;align-items:center">
    <h1 style="flex:1 1 auto">Audi Competitor Model Matrix (EU)</h1>
    <div class="controls-right">
      <button id="downloadCsvBtn">Export CSV</button>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="grid">
    <table id="matrixTable">
      <thead>
        <tr>
          <th>Brand</th>
          <th><div class="seg">Compact Hatch/Sedan</div></th>
          <th><div class="seg">Mid-Size Sedan</div></th>
          <th><div class="seg">Executive Sedan</div></th>
          <th><div class="seg">Compact SUV</div></th>
          <th><div class="seg">Mid-Size SUV</div></th>
          <th><div class="seg">Large / 3-Row</div></th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div class="note">Static segments for comparison across brands; columns are generic and not tied to a specific brand label.</div>
</div>

<script>
(function(){
  // Simple Icons CDN base (uses @latest to keep current)
  const ICON_CDN = 'https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/'; // see project README for CDN usage [web:137]

  // Map base brand -> Simple Icons slug
  const iconSlug = {
    "Audi":"audi",
    "BMW":"bmw",
    "Mercedes-Benz":"mercedes",
    "Tesla":"tesla",
    "Volvo":"volvo",
    "Lexus":"lexus",
    "Genesis":"genesis",
    "Porsche":"porsche",
    "Jaguar":"jaguar",
    "Land Rover":"landrover",
    "Alfa Romeo":"alfaromeo",
    "Polestar":"polestar",
    "Nio":"nio",
    "BYD":"byd",
    "Lucid":"lucid",
    "Volkswagen":"volkswagen",
    "Škoda":"skoda",
    "Cupra":"cupra",
    "Peugeot":"peugeot",
    "Citroën":"citroen",
    "Hyundai":"hyundai",
    "Kia":"kia",
    "Mazda":"mazda"
  };

  const segments = [
    "A3 Compact Hatch/Sedan",
    "A4 Mid-Size Sedan",
    "A6 Executive Sedan",
    "Q3 Compact SUV",
    "Q5 Mid-Size SUV",
    "Q7 Large SUV / 3-Row"
  ];

  // Dataset rows (base and variants)
  const data = {
    "Audi": ["A3 Hatch / Sedan","A4 Sedan","A6 Sedan","Q3 SUV","Q5 SUV","Q7 SUV"],
    "BMW": ["1-Series Hatch","3-Series Sedan","5-Series Sedan","X1 SAV","X3 SAV","X5 SAV"],
    "BMW (Alt)": ["2-Series Gran Coupe","i4 Gran Coupe (EV)","i5 Sedan (EV)","iX1 (EV)","iX3 (EV)","X7 SAV"],
    "BMW (Addl)": ["(Blank)","(Blank)","8-Series Gran Coupe","X2 SAV","X4 SAV","(Blank)"],
    "Mercedes-Benz": ["A-Class Hatch","C-Class Sedan","E-Class Sedan","GLA SUV","GLC SUV","GLE SUV"],
    "Mercedes-Benz (Alt)": ["CLA-Class Sedan","CLE-Class","EQE Sedan (EV)","EQA (EV)","EQC (EV)","EQS SUV (EV)"],
    "Mercedes-Benz (Addl)": ["(Blank)","(Blank)","S-Class Sedan","(Blank)","GLC Coupe","GLS SUV"],
    "Tesla": ["Model 3 (Entry)","Model 3 (Core)","Model S","Model Y (Entry)","Model Y (Core)","Model X"],
    "Volvo": ["C40 (EV)","S60 Sedan","S90 Sedan","XC40 SUV","XC60 SUV","XC90 SUV"],
    "Volvo (Alt)": ["EX30 (EV)","(Blank)","(Blank)","EX40 (EV)","(Blank)","EX90 (EV)"],
    "Lexus": ["CT 200h","IS Sedan","ES Sedan","UX Crossover","NX Crossover","RX SUV"],
    "Lexus (Alt)": ["(Blank)","(Blank)","LS Sedan","(Blank)","RZ (EV)","TX SUV"],
    "Genesis": ["(Blank)","G70 Sedan","G80 Sedan","GV60 (EV)","GV70 SUV","GV80 SUV"],
    "Porsche": ["(Blank)","(Blank)","Panamera","Macan","Cayenne","Cayenne Coupe"],
    "Jaguar": ["(Blank)","XE Sedan","XF Sedan","E-Pace SUV","F-Pace SUV","I-Pace (EV)"],
    "Land Rover": ["(Blank)","(Blank)","(Blank)","Discovery Sport","Range Rover Velar","Discovery"],
    "Land Rover (Alt)": ["(Blank)","(Blank)","(Blank)","Range Rover Evoque","Defender 90/110/130","Range Rover Sport"],
    "Alfa Romeo": ["Giulietta","Giulia Sedan","(Blank)","Tonale","Stelvio SUV","(Blank)"],
    "Polestar": ["2 Sedan","2 Sedan","3 SUV (Large EV)","4 SUV","(Blank)","(Blank)"],
    "Nio": ["ET5","ET5 Touring","ET7 Sedan","EL6 SUV","EL7 SUV","ES8 SUV"],
    "BYD": ["Dolphin","Seal Sedan","(Blank)","Atto 3","Seal U SUV","Tang SUV"],
    "Lucid": ["(Blank)","(Blank)","Air Sedan","(Blank)","(Blank)","(Blank)"],
    "Volkswagen": ["Golf Hatch","Passat Sedan/Estate","Arteon","T-Roc","Tiguan","Touareg"],
    "Škoda": ["Octavia","Superb","Superb","Kamiq","Karoq","Kodiaq"],
    "Škoda (Alt)": ["Enyaq (EV)","(Blank)","(Blank)","(Blank)","Enyaq Coupe (EV)","(Blank)"],
    "Cupra": ["Leon","Leon","(Blank)","Formentor","Tavascan (EV)","(Blank)"],
    "Cupra (Alt)": ["Born (EV)","(Blank)","(Blank)","(Blank)","(Blank)","(Blank)"],
    "Peugeot": ["308 Hatch","508 Sedan/SW","(Blank)","2008","3008","5008"],
    "Citroën": ["C4","C5 X","(Blank)","C3 Aircross","C5 Aircross","(Blank)"],
    "Hyundai": ["i30","Ioniq 6 (EV)","(Blank)","Kona","Tucson","Santa Fe"],
    "Kia": ["Ceed","EV6 (EV)","(Blank)","Niro","Sportage","Sorento"],
    "Mazda": ["3","6","(Blank)","CX-30","CX-5","CX-60/CX-80"]
  };

  function getAllBaseBrandNames(){
    const set = new Set();
    Object.keys(data).forEach(b => set.add(b.replace(/\s*\(.*\)$/, '')));
    return Array.from(set).sort((a,b)=> a.localeCompare(b,'en',{sensitivity:'base'}));
  }
  function rowsForBrand(base){
    const keys = Object.keys(data).filter(k => k === base || k.startsWith(base + ' '));
    const order = k => k.includes('(Alt)') ? 1 : k.includes('(Addl)') ? 2 : 0;
    return keys.sort((a,b)=> order(a)-order(b));
  }

  function iconURL(baseBrand){
    const slug = iconSlug[baseBrand];
    if(!slug) return null;
    return ICON_CDN + slug + '.svg';
  }

  function buildTable(){
    const tbody = document.querySelector('#matrixTable tbody');
    tbody.innerHTML = '';
    const bases = getAllBaseBrandNames();
    bases.forEach(base => {
      rowsForBrand(base).forEach(key => {
        const tr = document.createElement('tr');
        const tdBrand = document.createElement('td');
        const url = iconURL(base);
        const img = url ? `<img class="icon" alt="${base}" src="${url}" onerror="this.style.display='none'">` : '';
        tdBrand.innerHTML = `<div class="brandcell">${img}<span class="brandname">${base}</span>${key!==base?`<span class="tag">${key.replace(base,'').trim()}</span>`:''}</div>`;
        tr.appendChild(tdBrand);
        const models = data[key] || [];
        for(let i=0;i<6;i++){
          const td = document.createElement('td');
          const val = models[i] || '(Blank)';
          td.innerHTML = val === '(Blank)' ? `<span class="blank">(Blank)</span>` : `<span class="model">${val}</span>`;
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      });
    });
  }

  function exportCSV(){
    const rows = [];
    rows.push(['Brand','Compact Hatch/Sedan','Mid-Size Sedan','Executive Sedan','Compact SUV','Mid-Size SUV','Large / 3-Row']);
    const bases = getAllBaseBrandNames();
    bases.forEach(base => {
      rowsForBrand(base).forEach(key => {
        const models = data[key] || [];
        rows.push([base + (key!==base?` ${key.replace(base,'')}`:''), ...models.map(x=> x||'(Blank)')]);
      });
    });
    const csv = rows.map(r => r.map(x => /[",\n]/.test(x)? `"${x.replace(/"/g,'""')}"` : x).join(',')).join('\n');
    const blob = new Blob([csv], {type:'text/csv;charset=utf-8;'});
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'Audi_Competitor_Model_Matrix_EU_2025_view.csv';
    document.body.appendChild(a);
    a.click(); a.remove();
  }

  function start(){
    buildTable();
    document.getElementById('downloadCsvBtn').addEventListener('click', exportCSV);
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', start);
  } else {
    start();
  }
})();
</script>
</body>
</html>
